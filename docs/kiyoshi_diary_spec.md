# kiyoshiの日記仕様書

## 基本コンセプト
「kiyoshiの日記」は、最新のニュースを自動取得し、それを元にClaude 3.5 Haikuを用いて面白おかしい架空の日記を自動生成するアプリケーションだべさ！シンプルなUIと自動化機能で、毎日新鮮で創造的な日記を提供するだべ！

## 主要機能

### 1. ニュース取得機能
- **Brave API連携**：Brave検索APIを使用して最新のニュースを自動取得
- **キーワード検索**：ユーザーが指定したキーワードに基づいてニュースを検索可能
- **定期取得**：Cloudflare Workers/Cronを活用して毎朝7時に自動でニュース取得

### 2. AI日記生成機能（Claude 3.5 Haiku活用）
- **創造的文章生成**：ニュースを元にkiyoshiの視点から面白おかしい架空の日記を生成
- **個性付け**：kiyoshiのキャラクター性を維持した一貫性のあるトーンと文体
- **マルチトピック**：複数のニューストピックを自然に組み合わせた日記生成
- **テスト機能**：キーワード入力から即時に日記を生成できるテスト機能

### 3. 日記管理・表示機能
- **シンプルUI**：余計な装飾なしの読みやすく使いやすいインターフェース
- **日記アーカイブ**：生成された日記の履歴をカレンダー形式で閲覧可能
- **共有機能**：SNSへの共有ボタンで気に入った日記をシェア可能

## 技術仕様

### データ構造
```yaml
---
date: 2025-03-08
news_keywords: [AI技術, 宇宙探査, 東京オリンピック]
news_sources: [
  "https://example.com/news/ai-breakthrough",
  "https://example.com/news/mars-mission",
  "https://example.com/news/tokyo-olympics"
]
generation_timestamp: "2025-03-08T07:00:15Z"
---

# 2025年3月8日 kiyoshiの日記

わっしょいイカべ～！今日は朝からAI技術の大発見のニュースを見てワクワクしただべさ！
なんでも人間の脳波を直接解析してロボットを動かせるようになったらしいだべよ。イカアガベヨイショ～！これでイカの干物が動き出す日も近いだべね！
```

### ファイル構成
- 日記ファイル：`/diary/YYYY/MM/DD.md`
- 設定ファイル：`/config.json`
- キャッシュ：`/cache/news/`
- ログデータ：`/logs/`

### API連携
- **Brave検索API**：ニュース記事取得用
- **Claude 3.5 Haiku API**：日記生成用
- **Cloudflare Workers**：定期実行と自動化用

### システムアーキテクチャ
- **フロントエンド**：シンプルなReactベースのUI
- **バックエンド**：API連携とデータ処理を行うNode.js
- **自動化**：Cloudflare Workersによるスケジュールタスク

## ユーザーインターフェース

### メイン画面
- シンプルな日記表示エリア
- カレンダー形式の日記アーカイブナビゲーション
- キーワード入力フォーム（テスト用）
- 日記生成ボタン

### 設定画面
- API設定（Brave API、Claude API）
- 自動生成時間設定
- キーワードプリセット管理
- 文体・トーン調整オプション

## フェーズ別実装計画

### フェーズ1：基本機能（現在）
- キーワード入力から日記生成する基本機能
- シンプルなUIの実装
- API連携の基本設定

### フェーズ2：自動化機能
- Cloudflare Workersによる定期実行設定
- ニュース自動取得機能の実装
- 日記アーカイブ機能の実装

### フェーズ3：拡張機能
- 複数ニュースソースからの情報統合
- カスタマイズ可能な文体・テーマ設定
- 共有機能の強化

## 実装詳細

### テスト用日記生成フロー
1. ユーザーがキーワードを入力
2. Brave APIでキーワードに関連するニュース取得
3. 取得したニュースをClaude 3.5 Haikuに送信
4. kiyoshiの視点で面白おかしい架空日記を生成
5. 生成結果を表示・保存

### 自動日記生成フロー
1. Cloudflare Workersが毎朝7時に起動
2. 事前設定されたキーワードまたはトレンドトピックを使用してニュース取得
3. 取得したニュースをClaude 3.5 Haikuに送信
4. 生成された日記をストレージに保存
5. 必要に応じて通知を送信

## プロンプト設計

### Claude 3.5 Haiku用プロンプト概要
```
以下のニュース記事を元に、kiyoshiという人物の視点から架空の面白おかしい日記を書いてください。

kiyoshiのキャラクター設定:
- 53歳、宮城県出身、千葉県旭市在住
- 口調：宮城弁（「〜だべ」「〜べさ」が特徴）
- 口癖：「おっとぉ〜い！」「日本をイカしたもんにするべ！」
- アホな元気の良いかけ声：
  * 「わっしょいイカべ～！」
  * 「イカッチャえ～～！」
  * 「テキーラホイサッサ～！」
  * 「イカアガベヨイショ～！」
  * 「ヤッホイカホイ！」
  * 「ドッカンイカン！」
  * 「ホイサッテキーラ！」
  * 「イカダンシング～♪」
- イカ関連の表現：
  * 「イカすべさ！」（「すごい/素晴らしい」という意味）
  * 「イカれた話だべよ！」（驚きを表現）
  * 「イカの目玉ほど驚いただべさ！」
- テキーラ関連の表現：
  * 「アガベの夢が膨らむだべ！」
  * 「テキーラショットのように一気にいくべさ！」
  * 「イガベザウルスもびっくりだべよ！」
- 特徴：イカが大好き、アガベを栽培してテキーラ製造を目指している、独自の政治活動
- 持ち物：イカの干物（お守り）、相棒のイガベザウルス（想像上の生き物）
- 陽気で発想豊か、行動力がある

実際にニュースの出来事を体験したかのように、創造的に脚色して書いてください。文中に必ずいくつかのアホな元気のよいかけ声を含め、イカやアガベ、テキーラ、イガベザウルスなどを話題に取り入れるとよりキャラクターらしくなります。

ニュース記事:
[ニュース内容]

日付: [今日の日付]
```

## 注意点
- 生成される日記はフィクションであり、実際の人物や出来事との関連性はないことを明示
- APIキーのセキュアな管理
- API使用量の最適化（コスト管理）
- シンプルなUIを維持しつつ、ユーザビリティを確保